(this["webpackJsonpreact-firebase-instagram-clone"]=this["webpackJsonpreact-firebase-instagram-clone"]||[]).push([[0],{57:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(17),o=a.n(s),c=a(14),i=(a(57),a(87)),r=a(97),l=a(3),d=Object(i.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},large:{width:e.spacing(7),height:e.spacing(7),margin:e.spacing(2)},text:{margin:e.spacing(2)},post:{backgroundColor:"white",display:"flex",flexDirection:"column",border:"0.5px solid lightgrey",maxWidth:"500px",margin:"20px auto"},post_header:{display:"flex",alignItems:"center"},post_image:{width:"100%",maxWidth:"500px",objectFit:"contain",borderTop:"1px solid lightgrey",borderBottom:"1px solid lightgrey"}}}));var u=function(e){var t=e.imgUrl,a=e.username,n=e.caption;console.log(t,a,n);var s=d();return Object(l.jsxs)("div",{className:s.post,children:[Object(l.jsxs)("div",{className:s.post_header,children:[Object(l.jsx)(r.a,{alt:"Remy Sharp",src:"https://images.unsplash.com/photo-1611367540679-d94566094025?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8d29tYW4lMjBmYWNlfGVufDB8MnwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",className:s.large}),Object(l.jsx)("h3",{className:"post_userName",children:a})]}),Object(l.jsx)("img",{src:t,alt:"user avatar",className:s.post_image}),Object(l.jsxs)("p",{className:s.text,children:[Object(l.jsxs)("strong",{children:[a,":"]})," ",n]})]})},m=a(5),p=(a(63),a(64),a(65),m.a.initializeApp({apiKey:"AIzaSyDGzTgPsG0FStItQ7ppelV3S-yB4m86cGI",authDomain:"instagram-clone-app-ebf8a.firebaseapp.com",projectId:"instagram-clone-app-ebf8a",storageBucket:"instagram-clone-app-ebf8a.appspot.com",messagingSenderId:"42253588690",appId:"1:42253588690:web:d5c66cc81cf62c6012750b"})),j=p.firestore(),b=p.auth(),g=p.storage(),f=a(93),h=a(95),x=a(90),O=a(98),v=a(92),y=a(91),w=Object(i.a)((function(e){return{root:{border:"0.5px solid lightgrey",padding:e.spacing(3),width:"450px",display:"flex",flexDirection:"column",margin:"0 auto",alignItems:"center"},progress:{width:"50%",marginBottom:e.spacing(2)},input:{width:"100%"},button:{margin:e.spacing(1)}}}));function N(e){var t=e.username,a=w(),s=Object(n.useState)(""),o=Object(c.a)(s,2),i=o[0],r=o[1],d=Object(n.useState)(""),u=Object(c.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(""),N=Object(c.a)(f,2),S=(N[0],N[1],Object(n.useState)(0)),C=Object(c.a)(S,2),_=C[0],k=C[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:a.root,children:[Object(l.jsx)(h.a,{type:"text",placeholder:"enter a caption",value:i,onChange:function(e){return r(e.target.value)},className:a.input,color:"secondary"}),Object(l.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&(console.log("file:",e.target.files[0]),b(e.target.files[0]))},className:a.input,style:{display:"none"},id:"raised-button-file"}),Object(l.jsx)("label",{htmlFor:"raised-button-file",children:Object(l.jsx)(x.a,{variant:"raised",component:"span",className:a.button,color:"secondary",children:Object(l.jsx)(y.a,{})})}),Object(l.jsx)(O.a,{variant:"determinate",color:"secondary",value:_,className:a.progress}),Object(l.jsx)(v.a,{variant:"outlined",onClick:function(){var e=g.ref("images/".concat(p.name)).put(p);console.log("image:",p),console.log("image name:",p.name),e.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);k(t)}),(function(e){console.log(e),alert(e.message)}),(function(){g.ref("images").child(p.name).getDownloadURL().then((function(e){console.log("url:"+e),j.collection("posts").add({timestamp:m.a.firestore.FieldValue.serverTimestamp(),caption:i,imageUrl:e,username:t})})),k(0),r(""),b(null)}))},children:"Upload"})]})})}var S=a(99),C=a(96),_=a(94);function k(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var W=Object(i.a)((function(e){return{form:{disaply:"flex",flexDirection:"column"},paper:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",width:250,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},box:{display:"flex",flexDirection:"column",justifyContent:"space-around"},button:{marginBottom:10},logbutton:{marginRight:10},img:{maxWidth:100},login:{dispaly:"flex"}}}));function D(){var e=W(),t=Object(n.useState)(k),a=Object(c.a)(t,1)[0],s=Object(n.useState)(!1),o=Object(c.a)(s,2),i=o[0],r=o[1],d=Object(n.useState)(!1),u=Object(c.a)(d,2),m=u[0],p=u[1],j=Object(n.useState)(""),g=Object(c.a)(j,2),f=g[0],x=g[1],O=Object(n.useState)(""),y=Object(c.a)(O,2),w=y[0],N=y[1],D=Object(n.useState)(""),F=Object(c.a)(D,2),I=F[0],B=F[1],A=Object(n.useState)(null),U=Object(c.a)(A,2),E=U[0],M=U[1];Object(n.useEffect)((function(){var e=b.onAuthStateChanged((function(e){e?(console.log("user:",e),M(e)):M(null)}));return function(){e()}}),[E,f]);var q=Object(l.jsxs)("div",{style:a,className:e.paper,children:[Object(l.jsx)("img",{className:e.img,src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo-2x.png/1b47f9d0e595.png",alt:"instagram logo"}),Object(l.jsxs)("form",{className:e.form,onSubmit:function(e){return e.preventDefault()&&!1},children:[Object(l.jsxs)(S.a,{margin:"normal",required:!0,fullWidth:!0,children:[Object(l.jsx)(C.a,{htmlFor:"name",children:"Name"}),Object(l.jsx)(h.a,{id:"name",name:"name",autoComplete:"off",autoFocus:!0,value:f,onChange:function(e){return x(e.target.value)}})]}),Object(l.jsxs)(S.a,{margin:"normal",required:!0,fullWidth:!0,children:[Object(l.jsx)(C.a,{htmlFor:"email",children:"Email Address"}),Object(l.jsx)(h.a,{id:"email",name:"email",autoComplete:"off",value:w,onChange:function(e){return N(e.target.value)}})]}),Object(l.jsxs)(S.a,{margin:"normal",required:!0,fullWidth:!0,children:[Object(l.jsx)(C.a,{htmlFor:"password",children:"Password"}),Object(l.jsx)(h.a,{name:"password",type:"password",id:"password",autoComplete:"off",value:I,onChange:function(e){return B(e.target.value)}})]}),Object(l.jsxs)("div",{className:e.box,children:[Object(l.jsx)(v.a,{className:e.button,variant:"outlined",color:"secondary",onClick:function(e){b.createUserWithEmailAndPassword(w,I).then((function(e){return e.user.updateProfile({displayName:f})})).catch((function(e){return alert(e.message)}))},children:"Sign up"}),Object(l.jsx)(v.a,{className:e.button,variant:"outlined",color:"secondary",onClick:function(){return r(!1)},children:"Close"})]})]})]}),P=Object(l.jsxs)("div",{style:a,className:e.paper,children:[Object(l.jsx)("img",{className:e.img,src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo-2x.png/1b47f9d0e595.png",alt:"instagram logo"}),Object(l.jsxs)("form",{className:e.form,onSubmit:function(e){return e.preventDefault()&&!1},children:[Object(l.jsxs)(S.a,{margin:"normal",required:!0,fullWidth:!0,children:[Object(l.jsx)(C.a,{htmlFor:"email",children:"Email Address"}),Object(l.jsx)(h.a,{id:"email",name:"email",autoComplete:"off",value:w,onChange:function(e){return N(e.target.value)}})]}),Object(l.jsxs)(S.a,{margin:"normal",required:!0,fullWidth:!0,children:[Object(l.jsx)(C.a,{htmlFor:"password",children:"Password"}),Object(l.jsx)(h.a,{name:"password",type:"password",id:"password",autoComplete:"off",value:I,onChange:function(e){return B(e.target.value)}})]}),Object(l.jsxs)("div",{className:e.box,children:[Object(l.jsx)(v.a,{className:e.button,variant:"outlined",color:"secondary",onClick:function(e){b.signInWithEmailAndPassword(w,I).catch((function(e){return alert(e.message)})),p(!1)},children:"Sign in"}),Object(l.jsx)(v.a,{className:e.button,variant:"outlined",color:"secondary",onClick:function(){return p(!1)},children:"Close"})]})]})]});return Object(l.jsxs)("div",{children:[E?Object(l.jsx)(v.a,{variant:"contained",color:"secondary",onClick:function(e){b.signOut()},children:"Sign out"}):Object(l.jsxs)("div",{className:e.login,children:[Object(l.jsx)(v.a,{className:e.logbutton,variant:"contained",color:"secondary",onClick:function(){return p(!0)},children:"Log in"}),Object(l.jsx)(v.a,{variant:"contained",color:"secondary",onClick:function(){r(!0)},children:"Sign Up"})]}),Object(l.jsx)(_.a,{open:i,onClose:function(){return r(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:q}),Object(l.jsx)(_.a,{open:m,onClose:function(){return p(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:P})]})}function F(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(""),i=Object(c.a)(o,2),r=i[0],d=i[1],m=Object(n.useState)(null),p=Object(c.a)(m,2),g=p[0],h=p[1];return Object(n.useEffect)((function(){j.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}}))),console.log("posts:",a)}));var e=b.onAuthStateChanged((function(e){e?(console.log("user:",e),h(e),d(g.displayName)):(h(null),d("guest"))}));return function(){e()}}),[g,r]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)("div",{className:"app_header",children:[Object(l.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo-2x.png/1b47f9d0e595.png",alt:"instagram logo"}),Object(l.jsx)("div",{className:"app_login",children:Object(l.jsx)(D,{})})]}),Object(l.jsxs)("div",{className:"app_body",children:[Object(l.jsxs)(f.a,{className:"app_title",color:"secondary",variant:"h4",align:"center",gutterBottom:!0,children:["Welcome to instagram ,"," ",Object(l.jsx)("strong",{className:"app_username",children:r})]}),r?Object(l.jsx)(N,{username:r}):Object(l.jsx)(f.a,{children:"Sorry you need to log in to upload images"}),a.map((function(e){return Object(l.jsx)(u,{imgUrl:e.post.imageUrl,username:e.post.username,caption:e.post.caption},e.id)}))]})]})}var I=document.getElementById("root");o.a.render(Object(l.jsx)(n.StrictMode,{children:Object(l.jsx)(F,{})}),I)}},[[67,1,2]]]);
//# sourceMappingURL=main.e89796b6.chunk.js.map